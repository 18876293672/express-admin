
<h2><a href="#ckeditor" name="ckeditor">CKEditor</a></h2>

<!-- INSTALL -->

<div class="box visible">
    <h4>Install</h4>
    <div class="info">
        <ul>
            <li>Download the editor from <a href="http://ckeditor.com/" target="_blank">ckeditor.com</a></li>
            <li>Extract the archive somewhere on your hard drive</li>
        </ul>
    </div>
</div>

<!-- CONFIG -->

<div class="box">
    <h4>Config</h4>
    <p>In <em>settings.json</em> add additional <em>editor</em> property to the column's <em>control</em> key specifiyng the class name for this editor instance</p>

<!-- code -->
<pre><code class="language-javascript">"control": {
    "textarea": true,
    "editor": "class-name"
}</code></pre>
<!-- code -->

    <p>In <em>custom.json</em> add a unique key for your custom stuff</p>
<!-- code -->
<pre><code class="language-javascript">"unique-key-here": {
    "public": {
        "path": "/absolute/path/to/custom/files/location",
        "js": [
            "/relative/to/above/path/ckeditor/ckeditor.js",
            "/relative/to/above/path/my-custom.js"
        ]
    }
}</code></pre>
<!-- code -->

    <div class="info">
        <ul>
            <li><strong>public</strong> - information about static files
                <ul>
                    <li><i>path</i> - absolute path to the static files location</li>
                    <li><i>css</i> - list of stylesheet files to be included</li>
                    <li><i>js</i> - list of javascript files to be included</li>
                </ul>
            </li>
        </ul>
        <p>Take a look at the the <a href="https://github.com/simov/express-admin-examples" target="_blank">examples repository</a></p>
    </div>
</div>

<!-- JAVASCRIPT -->

<div class="box">
    <h4>Javascript <a href="#" class="btn-info">expand</a></h4>
    <p>Add this code to <em>my-custom.js</em></p>

    <div class="col col1">
<!-- code -->
<pre><code class="language-javascript">$(function () {
    if (typeof CKEDITOR !== 'undefined') {
        CKEDITOR.replaceAll(function (textarea, config) {
            // exclude textareas that are inside hidden inline rows
            if ($(textarea).parents('tr').hasClass('blank')) return false;
            // textareas with this class name will get the default configuration
            if (textarea.className === 'class-name') return true;
            // all other textareas won't be initialized as ckeditors
            return false;
        });
    }
});

// executed each time an inline is added
function onAddInline (rows) {
    if (typeof CKEDITOR !== 'undefined') {
        // for each of the new rows containing textareas
        $('textarea', rows).each(function (index) {
            // get the DOM instance
            var textarea = $(this)[0];
            // textareas with this class name will get the default configuration
            if (textarea.className === 'class-name') return CKEDITOR.replace(textarea);
            // all other textareas won't be initialized as ckeditors
            return false;
        });
    }
}</code></pre>
<!-- code -->

    </div>
    <div class="info">
        <ul>
            <li>Here <em>class-name</em> is the same class name specified in <em>settings.json</em> for this column</li>
            <li>The upper part of the script shows how the ckeditor instances should be initialized. The most important bit is where all textareas that are hidden are excluded</li>
            <li>The <em>onAddInline</em> function is called each time an inline record is appended to the list of records. This is the place to initialize any editors that are contained inside an inline table's record</li>
            <li>For a full list of all CKEditor's options go to <a href="http://ckeditor.com/" target="_blank">ckeditor.com</a></li>
        </ul>
        <p>Take a look at the the <a href="https://github.com/simov/express-admin-examples" target="_blank">examples repository</a></p>
    </div>
</div>

<!-- RESULT -->

<div class="box">
    <h4>Result <a href="#" class="btn-info">expand</a></h4>
    <div class="info">
        <iframe class="example-ckeditor" data-src="examples/ckeditor.html" src="about:blank"></iframe>
    </div>
</div>
